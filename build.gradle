task buildHetzer(type: Exec) {
    executable = 'stack'
    args = ['build']
}

task installHetzer(dependsOn: buildHetzer, type: Exec) {
    executable = 'stack'
    args = ['install', '--local-bin-path', 'target']
}

task copyConfig(type: Copy) {
    from 'config'
    into 'target'
    include 'hetzer_conf.json'
}

task copyCss(type: Copy) {
    from 'frontend'
    into 'target'
    include '*.css'
}

task copyIndex(type: Copy) {
    from 'frontend'
    into 'target'
    include 'index.html'
}

task install
install.dependsOn copyCss,copyIndex,copyConfig,installHetzer
